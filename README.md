# Сервис для пересылки сообщений в Telegram

Позволяет автоматически пересылать сообщения в любое число предварительно настроенных чатов/каналов/ботов/групп. Интерфейс для взаимодействия - телеграм бот. На стороне сервиса реализован Telegram-клиент, в котором следует авторизоваться с учётной записью пользователя (один контейнер с сервисом поддерживает только одного пользователя). Telegram-клиент используется для пересылки сообщений от имени пользователя, соответственно ему доступны все переписки пользователя.

## Как использовать

1. Создайте собственного бота через https://t.me/BotFather.  
Этот бот будет использоваться в качестве интерфейса для конфигурации. Кроме конфигурации, все сообщения отправленные боту будут пересылаться в установленные переписки от имени пользователя.

2. Зарегистрируйте телеграм-клиент на сайте core.telegram.org чтобы получить ID и хеш для доступа к API клиентов.

3. Заполните переменные окружения:
```env
BOT_TOKEN=... # Токен для бота от @BotFather
TG_CLIENT_API_ID=... # api_id с core.telegram.org
TG_CLIENT_API_HASH=... # api_hash с core.telegram.org
TG_PHONE_NUMBER=... # Ваш номер телефона
```

4. Запустите сервис локально чтобы сформировать файл `WTelegram.session`. В первый раз нужно будет пройти авторизацию.  
Всё уже работает! Следующие шаги нужны для запуска в контейнере.

5. После первого локального запуска в рабочей директории процесса появится файл `WTelegram.session`. Его нужно переместить в директорию `/secrets`.

6. Соберите контейнер командой `docker build .`  
Не публикуйте контейнер! В нём зашита ваша телеграм-сессия. 

7. Заполнить файл env-файл, с такими же переменными окружения как в пункте 3.

8. Запускайте контейнер указав env-файл, например `docker run --env-file .\secrets\env (docker build . -q)`